---
layout: post
title: 架构再改版
tags: 测试 测试2 测试3
author: 你猜
---

<h2>第四版架构</h2>

<div>
	<h3>改版说明</h3>
	<ol>
		<li>本次主要调整语法结构，从监听每一个具体行为到现在监听页面状态</li>
		<li>监听页面进入状态，进入时自动触发插件行为，执行自定义回调，回调内重写jquery选择作用域</li>
		<li>监听页面离开状态，基本同上，进入离开都通过钩子程序实现</li>
		<li>监听页面初始化状态，为插件预留配置接口，适应不同环境，同样使用钩子实现</li>
		<li>钩子功能：创建页面实例后，当页面触发状态时执行实例指定方法，无需优先监听事件</li>
	</ol>
	<p>
		通过钩子很好的解决了流程执行顺序的问题，用js对象的动态属性特性实现。页面载入事件比监听更快，以前用了一次主动触发解决这个问题，现在通过钩子规范性更强，且执行顺序不再是异步回调，更容易控制。<br />进入和退出回调内就通过这个特点主动触发插件，不需人工再写插件执行语句，插件可能需要更多的配置而减少了实现逻辑，最终实现mvvm的无需关心任何实现，只考虑业务逻辑即可。
	</p>
</div>
<div style="margin:20px 0">
	<h3>配置说明</h3>
	<ol>
		<li>除了语法改进还将原本需要单独配置的通用内容统一起来</li>
		<li>目前可配置项有插件、路由、页面切换效果</li>
		<li>配置的改进让代码依赖关系更清晰</li>
	</ol>
</div>
<div style="margin:20px 0">
	<h3>插件接口</h3>
	<ol>
		<li>因为使用了钩子，所以插件必须实现统一接口方便调用</li>
		<li>接口主要为创建、重置</li>
		<li>目前只有自动模式，以后可以根据配置信息选择手动启动</li>
	</ol>
</div>

<div style="margin:20px 0">
	<h3>无缝切换</h3>
	<ol>
		<li>最新版chrome中css3动画执行出现错误</li>
		<li>考虑使用最初版解决方案，用css3的transition通过js计算执行</li>
		<li>切换方案会比目前方案少很多，但兼容性会得到提高</li>
	</ol>
</div>

<div style="margin:20px 0">
	<h3>其他</h3>
	<ol>
		<li>grunt构建，可自动化跑测试</li>
		<li>逐渐引入测试驱动开发</li>
	</ol>
</div>
<p>{{ page.date | date_to_string }}</p>